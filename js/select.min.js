(function(a){function b(b,c,d){a(b).find('.dropdown-header, .dropdown-item').remove();const e=(c)=>{const d=c.innerText,e=a('<a href="#" class="dropdown-item"></a>').text(d);e.attr('data-index',a(c).data('index')),a(c).is('option:selected')&&e.addClass(j.activeClass),a(c).is('option:disabled')&&e.addClass(j.disabledClass),b.append(e)},f=(c)=>{const d=a(c).attr('label'),e=a('<span class="dropdown-header"></span>').text(d);b.append(e)},g=(b)=>{a(b).each((b,c)=>{if(!(d&&a(c).is(':disabled'))){if(a(c).is('optgroup')){const b=a(c).children();f(c),g(b)}a(c).is('option')&&e(c)}})};return c=c.filter((b,c)=>!d||a(c).is(':enabled')),0===c.length?void(()=>{const c=a('<span class="dropdown-header"></span>').text(j.empty);b.append(c)})():void g(c)}function c(b){const c=a(b).find('option:selected'),d=[];return c.each((a,b)=>{d.push(b.innerText)}),0===c.length?j.notSelectedTitle:d.join(', ')}function d(b,d){const e=c(b);a(d).find('.btn').text(e)}function e(b){const c=a(b),e=a(c).next(`.${g}`);d(c,e)}function f(b){if(!a(b).is('select'))throw new Error('Only <select /> elements are allowed');if(!a(b).hasClass(h)){const d=a(b).data('btn-class')||'btn-secondary',e=c(b),f=a('<button class="btn btn-block dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>').addClass(d),i=a('<div class="alert alert-danger select-extend-alert" role="alert"></div>'),j=a('<div class="dropdown-menu"></div>').append(i),k=a('<div class="dropdown"></div>').addClass(g);a(b).find('option').each((b,c)=>a(c).attr('data-index',b)),a(b).addClass(h),a(b).after(k.append(f.text(e),j))}}const g='select-extended-element',h='select-extend',i='select-search',j={search:'Search',notSelectedTitle:'Nothing to shown',empty:'Nothing to shown',activeClass:'active',disabledClass:'disabled',maxOptionMessage:'Limit reached (%items items max)',maxOptionMessageDelay:2e3};a('body').on('click',`.${g} .dropdown-menu > *`,function(b){b.preventDefault();const c=a(this).parents(2).prev(`.${h}`),d=a(this).parent(),f=c.attr('multiple'),g=c.data('max-options'),k=c.data('max-options-message')||j.maxOptionMessage,l=c.find('option:selected').length,m=a(this).data('index'),n=c.find('option[data-index="'+m+'"]');if(f&&b.stopPropagation(),!(a(this).hasClass(j.disabledClass)||a(this).hasClass('dropdown-header')||a(this).hasClass(i))){if(g&&!a(n).attr('selected')&&l>=g){const b=a(d).find('.select-extend-alert');return a(b).text(k.replace('%items',g)),a(b).fadeIn(200),void setTimeout(()=>a(b).fadeOut(200),j.maxOptionMessageDelay)}f||(c.find('option').attr('selected',!1),d.find(`.${j.activeClass}`).removeClass(j.activeClass)),a(n).attr('selected',!a(n).attr('selected')),a(this).toggleClass(j.activeClass),e(c)}}).on('show.bs.dropdown',`.${g}`,function(c){function d(b){return function(c,d){return a(d).text().toLowerCase().includes(b.toLowerCase())}}function e(){const c=a(this).val(),e=f.find('option').filter(d(c)),h=c?e:f.children();b(g,h,f.data('hide-disabled'))}const f=a(this).prev(`.${h}`),g=a(this).find('.dropdown-menu'),k=a(f).data('live-search');if(k){const b=a(f).data('live-search-placeholder')||j.search,c=a('<input class="form-control" type="text" autofocus>').addClass(i).attr('placeholder',b);a(`.${i}`).remove(),g.append(c),g.find(`.${i}`).on('input',e)}b(g,f.children(),f.data('hide-disabled')),setTimeout(()=>a('[autofocus]',c.target).focus(),100)}).on('hide.bs.dropdown',`.${g}`,function(){a(this).find('.dropdown-menu .select-search').off('change')}).on('change',`.${h}`,function(){e(this)}),a.fn.extendSelect=function(b){try{b&&(j.search=b.search||j.search,j.notSelectedTitle=b.notSelectedTitle||j.notSelectedTitle,j.empty=b.empty||j.empty),a(this).each((a,b)=>f(b))}catch(a){console.error(a)}}})(jQuery);